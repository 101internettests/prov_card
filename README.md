## Автотест проверки поля «Абонентская плата»

Инструмент для регулярной проверки наличия поля «Абонентская плата» в карточках провайдеров по спискам страниц (МОЛ, ПОЛ, 101 и т.д.). При отсутствии поля фиксирует негативный результат в Google Sheets и (опционально) отправляет алерт в Telegram.

### Возможности
- Читает заранее заданные списки URL из файлов в директории (настраивается через env)
- Для каждой страницы проверяет карточки провайдеров:
  - учитываются карточки, где присутствуют слова «Скорость» и «Подключение»
  - среди них проверяется наличие «Абонентская плата» (значение не важно)
- Негативные результаты добавляются в Google Sheet (не затирая прошлые)
- Один алерт в Telegram на URL при наличии хотя бы одной проблемной карточки
- Возможность отключить алерты

### Требования
- Python 3.10+
- Google Service Account JSON (для записи в Google Sheets)
- Chrome установлен (Selenium запустит драйвер автоматически)

### Установка
1. Установите зависимости:
```bash
pip install -r requirements.txt
```
2. Создайте `.env` на основе `.env.example` и заполните значения.
3. Поместите файлы со списками URL в директорию, указанную в `URLS_DIR`.

### Запуск
Проверить все группы (все `.txt` файлы в `URLS_DIR`):
```bash
python run_checks.py
```

Проверить конкретную группу (имя файла без расширения):
```bash
python run_checks.py --group mol
```

Запуск в headless-режиме (по умолчанию включён в `.env`):
```bash
HEADLESS=true python run_checks.py
```

### Формат файлов URL
Каждая строка — один URL. Пустые строки и строки с `#` игнорируются.

Пример: `data/urls/mol.txt`
```
https://example.com/moskva
https://example.com/spb
```

### Переменные окружения
- `URLS_DIR` — директория с файлами групп URL (по умолчанию `data/urls`)
- `HEADLESS` — запуск браузера без окна, `true/false` (по умолчанию `true`)
- `BOT_TOKEN` — токен Telegram-бота
- `CHAT_ID` — ID чата для алертов
- `ALERTS_ENABLED` — включить/выключить алерты в TG (`true/false`)
- `SHEET_ID` — ID таблицы Google Sheets
- `GOOGLE_SERVICE_ACCOUNT_JSON` — путь к JSON ключу сервисного аккаунта

### Что записывается в Google Sheets
Строки вида: URL, Время прогона (UTC), Список провайдеров без «Абонентская плата».

### Примечания
- Правило уведомлений 1-й/4-й/12-й/каждые 10 — опционально и на данный момент опущено для ускорения запуска. Архитектура позволяет добавить позже с хранением состояния.
- Получение имени провайдера зависит от вёрстки. Если явный заголовок не найден, используется усечённый текст карточки или индекс карточки.